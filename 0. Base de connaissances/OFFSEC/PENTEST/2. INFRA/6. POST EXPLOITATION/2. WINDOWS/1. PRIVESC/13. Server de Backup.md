
Voir [[11. Serveur de Backup]] si besoin de monter un serveur restic sur la machine de l'attaquant.

## RESTIC

https://github.com/restic/restic/releases


1. Initialiser un répertoire de Backup

```powershell
mkdir E:\restic3
restic.exe init -r E:\restic3
```


2. Ajouter le mot de passe crée lors de l'initialisation en variable d'environnement

```powershell-session
$env:RESTIC_PASSWORD = 'Password'
```

3. Backup d'un répertoire

```powershell-session
restic.exe backup C:\SampleFolder -r E:\restic2\
```

4. Backup du dossier C:\Windows\System32\config avec VSS (--use-fs-snapshot)

```powershell
restic.exe backup C:\Windows\System32\config --use-fs-snapshot -r E:\restic2\
```

5. Check des backups réalisés

```powershell-session
restic.exe snapshots -r E:\restic2\
```

6. Restaurer un backup avec son ID dans C:\Restore

```powershell-session
restic.exe restore <id> -r E:\restic2\ --target C:\Restore
```

